<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Expressive, Scalable Load Testing Tool">
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">

	<title>MZBench Docs</title>

        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <link href="./css/custom.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href=".">MZBench Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="active">
                        <a href=".">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Scenarios <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="scenarios/tutorial/">How to Write a Scenario</a>
</li>

                        
                            
<li >
    <a href="scenarios/spec/">Scenario DSL Specification</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="dashboard/">Dashboard</a>
                    </li>
                
                
                
                    <li >
                        <a href="cli/">CLI</a>
                    </li>
                
                
                
                    <li >
                        <a href="api/">API</a>
                    </li>
                
                
                
                    <li >
                        <a href="deployment/">Deployment</a>
                    </li>
                
                
                
                    <li >
                        <a href="cloud_plugins/">Cloud Plugins</a>
                    </li>
                
                
                
                    <li >
                        <a href="workers/">Workers</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li class="disabled">
                        <a rel="next" >
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="scenarios/tutorial/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="http://github.com/machinezone/mzbench/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#welcome-to-mzbench">Welcome to MZBench</a></li>
        
            <li><a href="#installation">Installation</a></li>
        
            <li><a href="#quickstart">Quickstart</a></li>
        
            <li><a href="#how-it-works">How It Works</a></li>
        
            <li><a href="#read-next">Read Next</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="welcome-to-mzbench">Welcome to MZBench<a class="headerlink" href="#welcome-to-mzbench" title="Permanent link">&para;</a></h1>
<p><strong><em>Expressive, scalable load testing tool</em></strong></p>
<hr />
<p><img alt="Graphs" src="./images/graphs.gif" /></p>
<p><strong>MZBench</strong> helps developers test software under huge load. With this, it helps reduce the risk of outages under real-life high load. </p>
<p>MZBench runs test scenarios on many machines simultaneously, maintaining millions of connections. This makes it suitable even for large scale products (we&rsquo;re talking Facebook large scale here).</p>
<p>MZBench is:</p>
<ul>
<li><strong>cloud-aware:</strong> allocates nodes directly from Amazon EC2 </li>
<li><strong>scalable:</strong> tested with 100 nodes and millions of connections</li>
<li><strong>extendable:</strong> lets you write your own <a href="./cloud_plugins#how-to-write-a-cloud-plugin">cloud plugins</a> and <a href="workers/#how-to-write-a-worker">workers</a></li>
<li><strong>open-source:</strong> released under the <a href="https://github.com/machinezone/mzbench/blob/master/LICENSE">BSD license</a></li>
</ul>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>To use MZBench, you&rsquo;ll need:</p>
<ul>
<li>Erlang &gt;= 17.1</li>
<li>C++ compiler</li>
<li>Python 2.6 or 2.7 with pip</li>
</ul>
<p>Most UNIX systems have C++ compiler and Python preinstalled.</p>
<p>Erlang is available in the <a href="http://pkgs.org/search/erlang">official repositories on most GNU/Linux distros</a>. If your distro doesn&rsquo;t have Erlang R17, <a href="http://www.erlang.org/doc/installation_guide/INSTALL.html">build it from source</a>.  </p>
<p>Download MZBench from GitHub and install Python requirements:</p>
<pre><code class="bash">$ git clone https://github.com/machinezone/mzbench
$ sudo pip install -r mzbench/requirements.txt 
</code></pre>

<h2 id="quickstart">Quickstart<a class="headerlink" href="#quickstart" title="Permanent link">&para;</a></h2>
<p>Start the MZBench server on localhost:</p>
<pre><code class="bash">$ cd mzbench
$ ./bin/mzbench start_server
Executing make -C /path/to//mzbench/bin/../server generate
Executing /path/to//mzbench/bin/../server/_build/default/rel/mzbench_api/bin/mzbench_api start
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first server start takes a few minutes. The shell will not respond, which is OK; please be patient. Further starts will be much faster.</p>
</div>
<p>When the server is running, launch an example benchmark:</p>
<pre><code class="bash">$ ./bin/mzbench run workers/http/examples/localhost.bdl
{
    &quot;status&quot;: &quot;pending&quot;, 
    &quot;id&quot;: 6
}
status: running                       00:09
</code></pre>

<p>Go to <a href="http://localhost:4800">localhost:4800</a> and see the benchmark live status:</p>
<p><img alt="Test Benchmark" src="./images/test_benchmark.png" /></p>
<h2 id="how-it-works">How It Works<a class="headerlink" href="#how-it-works" title="Permanent link">&para;</a></h2>
<p>MZBench runs your test scenarios on many <em>nodes</em>, simultaneously. This allows it to put extraordinarily high load on the target system—we&rsquo;re talking about <em>millions</em> of simultaneous connections here.</p>
<p><strong>Node</strong> is a machine, virtual or physical, that runs your scenarios. In real-life testing, MZBench is used with a cloud service like Amazon EC2 that provides nodes on demand. Alternatively, you can manually list the available node hosts. Anyway, you have to provide MZBench the machines to run on. If there&rsquo;s not enough nodes to run all the jobs at the same time, MZBench evenly distributes the jobs between the available nodes.</p>
<p>There&rsquo;s one node that doesn&rsquo;t run scenarios—the <strong>director node</strong>. It collects the metrics from the other nodes and runs <a href="scenarios/spec/#pre_hook-and-post_hook">post and pre hooks</a>. So, if you want to run jobs on 10 nodes, reserve 11.</p>
<p><img alt="MZBench Architecture Provisioning" src="./images/scheme_1.png" /></p>
<p>When the MZBench server runs your scenarios, it allocates the nodes, prepares them, and distributes the jobs. During the test run, the nodes send the collected data to the director node which then submits them to the server. The server uses the data to render graphs and show stats:</p>
<p><img alt="MZBench Architecture Running" src="./images/scheme_2.png" /></p>
<p>To know what kind of jobs MZBench can run, it&rsquo;s important to understand the concept of a <em>worker</em>.</p>
<p><strong>Worker</strong> is an Erlang module that provides functions for test scenarios. A worker may implement a common protocol like HTTP or XMPP, or a specific routine that is relevant only for a particular test case. It also implements the related metrics.</p>
<p>MZBench ships with workers for <a href="https://github.com/machinezone/mzbench/tree/master/workers/http">HTTP</a> and <a href="https://github.com/machinezone/mzbench/tree/master/workers/xmpp">XMPP</a> protocols and a worker that <a href="https://github.com/machinezone/mzbench/tree/master/workers/exec">executes shell commands</a>. This should be enough for most common test cases, but you can use your own workers in necessary.</p>
<h2 id="read-next">Read Next<a class="headerlink" href="#read-next" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="scenarios/tutorial/">How to write scenarios →</a></li>
<li><a href="cli/">How to control MZBench from command line →</a></li>
<li><a href="deployment/">How to deploy MZBench →</a></li>
<li><a href="workers/#how-to-write-a-worker">How to write your own worker →</a></li>
</ul></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>

<!--
MkDocs version : 0.15.3
Build Date UTC : 2017-04-06 06:32:04.753158
-->
